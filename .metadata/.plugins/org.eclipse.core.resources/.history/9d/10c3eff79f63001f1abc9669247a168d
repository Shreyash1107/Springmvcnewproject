package org.controller;

import java.util.List;
import java.util.Optional;

import javax.servlet.http.HttpServletRequest;

import org.model.LoginModel;
import org.service.Adminservice;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class HomeController {
	@Autowired
	Adminservice adminservice;
	@RequestMapping(value = "/")
	public String gethomeoage() {
		return "index";
	}
	@RequestMapping(value = "/admin")
	public String getadmin() {
		return "Adminlogin";
	}
	@RequestMapping(value = "/adminlogin")
	public String getAdminLogin(HttpServletRequest req, LoginModel lmodel) {
	    String username = req.getParameter("Name");
	    String password = req.getParameter("pass");
	    
	    // Retrieve the list of matching login models
	    List<LoginModel> list = adminservice.getadminlogin(username, password);
	    
	    // Check if the list is not empty
	    if (!list.isEmpty()) {
	        // Assuming the first entry in the list is the relevant one
			/* LoginModel loginModel = list.get(0); */
	        String logintype = loginModel.getLogintype();
	        
	        if ("Admin".equals(logintype)) {
	            return "Admindashboard";
	        } else {
	            req.setAttribute("msg", "Invalid login type.");
	            return "Adminlogin";
	        }
	    } else {
	        req.setAttribute("msg", "Invalid username or password.");
	    }
	    
	    return "Adminlogin";
	}

	@RequestMapping(value = "/alumni")
	public String getalumnilogin() {
		return "Alumnilogin";
	}
}
